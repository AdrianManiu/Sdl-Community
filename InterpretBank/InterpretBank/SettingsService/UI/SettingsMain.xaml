<Window x:Class="InterpretBank.SettingsService.UI.SettingsMain"
		xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
		xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
		xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
		xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
		xmlns:ui="clr-namespace:InterpretBank.SettingsService.UI"
		xmlns:viewModel="clr-namespace:InterpretBank.SettingsService.ViewModel"
		xmlns:styles="clr-namespace:InterpretBank.Styles"
		xmlns:interpretBank="clr-namespace:InterpretBank"
		xmlns:converters="clr-namespace:InterpretBank.SettingsService.Converters"
		MouseDown="Window_MouseDown"
		mc:Ignorable="d"
		d:DataContext="{d:DesignInstance viewModel:SettingsService}"
		Title="MainWindow"
		ResizeMode="NoResize"
		SizeToContent="Height"
		WindowStartupLocation="CenterScreen"
		Height="500"
		Width="600"
		WindowStyle="None">
	<Window.Resources>
		<ResourceDictionary>
			<ResourceDictionary.MergedDictionaries>
				<ResourceDictionary Source="../../Styles/WindowsBorder.xaml" />
				<ResourceDictionary Source="/Sdl.Desktop.Platform.Styles;component/ButtonResources.xaml" />
				<ResourceDictionary Source="../Styles/SettingsResources.xaml" />
				<ResourceDictionary Source="../Styles/SettingsMainResources.xaml" />
				<ResourceDictionary Source="/Sdl.Desktop.Platform.Controls;component/Controls/WatermarkTextBox/WatermarkTextBoxResources.xaml" />
			</ResourceDictionary.MergedDictionaries>

			<converters:NullToVisibilityConverter x:Key="NullToVisibilityConverter" />

			<DataTemplate DataType="{x:Type viewModel:SettingsViewModel}">
				<ui:Settings />
			</DataTemplate>

			<DataTemplate DataType="{x:Type viewModel:SetupGlossariesViewModel}">
				<ui:GlossarySetup />
			</DataTemplate>
            

		</ResourceDictionary>
	</Window.Resources>

	<Border Style="{StaticResource WindowControlBorderStyle}">
		<Grid Margin="0,0,0,0"
		      Background="{StaticResource WindowsControl.Navigation.Backround}">
			<Grid.RowDefinitions>
				<RowDefinition Height="Auto" />
				<RowDefinition Height="Auto" />
				<RowDefinition Height="*" />
				<RowDefinition Height="Auto" />
				<RowDefinition Height="*" />
			</Grid.RowDefinitions>

			<styles:WindowsControl Grid.Row="0" />

			<Image Grid.Row="1" Height="50" Source="../../Resources/logo.png"/>

			<DockPanel Grid.Row="2"
					   HorizontalAlignment="Stretch"
					   Margin="10 10 10 5"
					   VerticalAlignment="Top">

				<TextBlock Text="{x:Static interpretBank:PluginResources.SettingsWindow_TextBlock_DBFilepath}"
				           DockPanel.Dock="Top" />
				<Grid>
					<TextBox Name="FilepathTextBox"
							 DockPanel.Dock="Bottom"
							 VerticalContentAlignment="Center"
							 IsReadOnly="True"
							 Text="{Binding Filepath, UpdateSourceTrigger=PropertyChanged}">
						<TextBox.InputBindings>
							<MouseBinding Command="{Binding ChooseFilePathCommand}"
										  MouseAction="LeftClick" />
						</TextBox.InputBindings>
					</TextBox>
					<Button Style="{StaticResource ClearTextButtonStyle}" 
							Click="ClearFilepathButton"
							BorderBrush="Transparent"
							Background="Transparent"
							Content="X"
							Visibility="{Binding ElementName=FilepathTextBox, Path=Text, Converter={StaticResource NullToVisibilityConverter}}"
							HorizontalAlignment="Right"
							Margin="5"/>

				</Grid>
			</DockPanel>

			<ui:Settings Grid.Row="3"
						 VerticalContentAlignment="top"
						 Visibility="{Binding ElementName=FilepathTextBox, Path=Text, Converter={StaticResource NullToVisibilityConverter}}" />

			<DockPanel Grid.Row="4"
					   Margin="0 50 0 0"
					   VerticalAlignment="Bottom"
					   LastChildFill="False">
				<Button Content="Cancel"
						Cursor="Hand"
						Width="120"
						IsCancel="True"
						Height="30"
						Style="{StaticResource Sdl.Button.SecondaryStyle}"
						DockPanel.Dock="Right"
						Margin="0 0 10 10" />

				<Button Content="Ok"
						Cursor="Hand"
						Width="120"
						Command="{Binding SaveCommand}"
						Click="ButtonBase_OnClick"
						Height="30"
						Style="{StaticResource Sdl.Button.PrimaryStyle}"
						DockPanel.Dock="Right"
						Margin="0 0 10 10" />
			</DockPanel>
		</Grid>
	</Border>
</Window>