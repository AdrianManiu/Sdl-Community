<Window x:Class="InterpretBank.SettingsService.UI.SettingsWindow"
		xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
		xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
		xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
		xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
		xmlns:sdl="http://schemas.sdl.com/xaml"
		xmlns:interpretBank="clr-namespace:InterpretBank"
		xmlns:settingsService="clr-namespace:InterpretBank.SettingsService"
		xmlns:model="clr-namespace:InterpretBank.SettingsService.Model"
		xmlns:styles="clr-namespace:InterpretBank.Styles"
		xmlns:generalModel="clr-namespace:InterpretBank.Model"
		MouseDown="Window_MouseDown"
		mc:Ignorable="d"
		d:DataContext="{d:DesignInstance settingsService:SettingsService}"
		Title="MainWindow"
		ResizeMode="NoResize"
		WindowStartupLocation="CenterScreen"
		Height="500"
		Width="600"
		WindowStyle="None">
	<Window.Resources>
		<ResourceDictionary>
			<ResourceDictionary.MergedDictionaries>
				<ResourceDictionary Source="../../Styles/WindowsBorder.xaml" />
				<ResourceDictionary Source="/Sdl.Desktop.Platform.Styles;component/ButtonResources.xaml" />
				<ResourceDictionary Source="/Sdl.Desktop.Platform.Styles;component/TextBlockResources.xaml" />
				<ResourceDictionary Source="/Sdl.Desktop.Platform.Controls;component/Controls/WatermarkTextBox/WatermarkTextBoxResources.xaml" />
			</ResourceDictionary.MergedDictionaries>

			<Style TargetType="TabItem"
				   BasedOn="{StaticResource {x:Type TabItem}}">
				<Setter Property="BorderThickness"
						Value="1" />
			</Style>

			<Style TargetType="TabControl">
				<Setter Property="BorderThickness"
						Value="0" />
			</Style>

			<Style TargetType="GroupBox"
				   BasedOn="{StaticResource {x:Type GroupBox}}">
				<Setter Property="Margin"
						Value="12" />
				<Setter Property="BorderThickness"
						Value="1" />
			</Style>

			<Style TargetType="TextBox"
				   BasedOn="{StaticResource {x:Type TextBox}}">
				<Setter Property="Margin"
						Value="0 2 0 0" />
				<Setter Property="Height"
						Value="25" />
			</Style>

			<Style TargetType="TextBlock"
				   BasedOn="{StaticResource Sdl.TextBlock.InformationTextStyle}">
				<Setter Property="FontSize"
						Value="14" />
				<Setter Property="HorizontalAlignment"
						Value="Left" />
				<Setter Property="Margin"
						Value="0 24 24 0" />
			</Style>
			<DataTemplate x:Key="TagTemplate"
						  DataType="{x:Type model:TagModel}">
				<DockPanel>
					<Image Source="../../Resources/Tag.png"
						   DockPanel.Dock="Left"
						   Height="17" />
					<TextBlock Text="{Binding TagName}"
							   FontSize="10"
							   VerticalAlignment="Center"
							   DockPanel.Dock="Right" />
				</DockPanel>
			</DataTemplate>

			<DataTemplate x:Key="GlossaryTemplate"
						  DataType="{x:Type model:GlossaryModel}">
				<DockPanel>
					<Image Source="../../Resources/Glossary.png"
						   DockPanel.Dock="Left"
						   Height="17" />
					<TextBlock Text="{Binding GlossaryName}"
							   FontSize="10"
							   VerticalAlignment="Center"
							   DockPanel.Dock="Right" />
				</DockPanel>
			</DataTemplate>

			<DataTemplate x:Key="LanguageTemplate"
						  DataType="{x:Type generalModel:Language}">
				<DockPanel>
					<Image Source="../../Resources/Flag.png"
						   DockPanel.Dock="Left"
						   Height="17" />
					<TextBlock Text="{Binding Name}"
							   FontSize="10"
							   DockPanel.Dock="Right" />
				</DockPanel>
			</DataTemplate>
		</ResourceDictionary>
	</Window.Resources>

	<Border Style="{StaticResource WindowControlBorderStyle}">
		<Grid Margin="0,0,0,0"
			  Background="{StaticResource WindowsControl.Navigation.Backround}">
			<Grid.RowDefinitions>
				<RowDefinition Height="Auto" />
				<RowDefinition Height="*" />
				<RowDefinition Height="Auto" />
			</Grid.RowDefinitions>

			<styles:WindowsControl Grid.Row="0" />

			<TabControl Grid.Row="1"
						FontSize="13"
						BorderThickness="0">

				<TabItem Header="Settings">
					<Grid VerticalAlignment="Center">
						<Grid.RowDefinitions>
							<RowDefinition Height="Auto" />
							<RowDefinition Height="Auto" />
							<RowDefinition Height="Auto" />
						</Grid.RowDefinitions>

						<DockPanel Grid.Row="0"
								   HorizontalAlignment="Stretch"
								   Margin="10 0"
								   VerticalAlignment="Top">
							<TextBlock Text="{x:Static interpretBank:PluginResources.SettingsWindow_TextBlock_DBFilepath}"
									   DockPanel.Dock="Top" />
							<TextBox DockPanel.Dock="Bottom"
									 VerticalContentAlignment="Center"
									 IsReadOnly="True"
									 Text="{Binding Filepath}">
								<TextBox.InputBindings>

									<MouseBinding Command="{Binding ChooseFilePathCommand}"
												  MouseAction="LeftClick" />
								</TextBox.InputBindings>
							</TextBox>
						</DockPanel>

						<DockPanel Grid.Row="1"
								   Margin="10 0"
								   HorizontalAlignment="Stretch">
							<TextBlock Text="{x:Static interpretBank:PluginResources.SettingsWindow_TextBlock_Tags}"
									   DockPanel.Dock="Top" />
							<sdl:MultiSelectComboBox Margin="0 2 0 0"
													 Height="64"
													 SelectedItems="{Binding SelectedTags, Mode=OneWayToSource}"
													 ItemsSource="{Binding Tags}"
													 DropdownItemTemplate="{StaticResource TagTemplate}"
													 SelectedItemTemplate="{StaticResource TagTemplate}" />
						</DockPanel>

						<DockPanel Grid.Row="2"
								   Margin="10 0"
								   HorizontalAlignment="Stretch">
							<TextBlock Text="{x:Static interpretBank:PluginResources.SettingsWindow_TextBlock_Glossaries}"
									   DockPanel.Dock="Top" />
							<sdl:MultiSelectComboBox Margin="0 2 0 0"
													 Height="64"
													 SelectedItems="{Binding SelectedTags, Mode=OneWayToSource}"
													 ItemsSource="{Binding Glossaries}"
													 DropdownItemTemplate="{StaticResource GlossaryTemplate}"
													 SelectedItemTemplate="{StaticResource GlossaryTemplate}" />
						</DockPanel>
					</Grid>
				</TabItem>
				<!--<TabItem Header="Create tags/glossaries">
					<Grid VerticalAlignment="Center">
						<Grid.RowDefinitions>
							<RowDefinition Height="Auto" />
							<RowDefinition Height="*" />
							<RowDefinition Height="Auto" />
						</Grid.RowDefinitions>

						<GroupBox Header="Tags"
								  Margin="10"
								  Grid.Row="0">
							<Grid>
								<Grid.RowDefinitions>
									<RowDefinition Height="Auto" />
									<RowDefinition Height="Auto" />
								</Grid.RowDefinitions>

								<DockPanel LastChildFill="False"
										   Grid.Row="0">
									<TextBlock Text="Type in a new tag then press enter:"
											   DockPanel.Dock="Top" />
									<TextBox x:Name="ValueHolder"
											 Visibility="Collapsed" />
									<TextBox DockPanel.Dock="Top"
											 PreviewKeyDown="UIElement_OnKeyDown">
										<TextBox.InputBindings>
											<KeyBinding Key="Enter"
														Command="{Binding EnterTagCommand}"
														CommandParameter="{Binding Text, ElementName=ValueHolder}" />
										</TextBox.InputBindings>
									</TextBox>
								</DockPanel>

								<sdl:MultiSelectComboBox Margin="0 10 0 0"
														 Height="60"
														 IsEditable="True"
														 EnableFiltering="False"
														 OpenDropDownListAlsoWhenNotInEditMode="False"
														 Grid.Row="1"
														 SelectedItems="{Binding Tags}"
														 DropdownItemTemplate="{StaticResource TagTemplate}"
														 SelectedItemTemplate="{StaticResource TagTemplate}" />
							</Grid>
						</GroupBox>
						<GroupBox Header="Glossaries"
								  Margin="10"
								  Grid.Row="1">
							<Grid>
								<Grid.RowDefinitions>
									<RowDefinition Height="Auto" />
									<RowDefinition Height="Auto" />
								</Grid.RowDefinitions>
								<DockPanel LastChildFill="False"
										   Grid.Row="0"
										   DockPanel.Dock="Left">
									<TextBlock Text="Type in a new glossary name then press enter:"
											   DockPanel.Dock="Top" />
									<TextBox DockPanel.Dock="Top"
											 PreviewKeyDown="UIElement_OnKeyDown">
										<TextBox.InputBindings>
											<KeyBinding Key="Enter"
														Command="{Binding EnterGlossaryCommand}"
														CommandParameter="{Binding Text, ElementName=ValueHolder}" />
										</TextBox.InputBindings>
									</TextBox>
								</DockPanel>
								<sdl:MultiSelectComboBox Margin="0 10 0 0"
														 Height="60"
														 IsEditable="False"
														 OpenDropDownListAlsoWhenNotInEditMode="False"
														 Grid.Row="1"
														 SelectedItems="{Binding Glossaries}"
														 DropdownItemTemplate="{StaticResource GlossaryTemplate}"
														 SelectedItemTemplate="{StaticResource GlossaryTemplate}" />
							</Grid>
						</GroupBox>
					</Grid>
				</TabItem>-->
				<TabItem Header="Tag/set up glossaries">
					<TabControl Margin="10">

						<TabItem Header="Glossaries">
							<Grid>
								<Grid.RowDefinitions>
									<RowDefinition Height="Auto" />
									<RowDefinition Height="*" />
								</Grid.RowDefinitions>
								<Grid.ColumnDefinitions>
									<ColumnDefinition />
									<ColumnDefinition />
								</Grid.ColumnDefinitions>

								<DockPanel LastChildFill="False"
										   Grid.Column="0"
										   Grid.ColumnSpan="2"
										   Grid.Row="0"
										   DockPanel.Dock="Left">
									<TextBox x:Name="ValueHolder"
											 Visibility="Collapsed" />
									<TextBlock Text="Type in a new glossary name then press enter:"
											   Margin="0 5 0 1"
											   DockPanel.Dock="Top" />
									<TextBox DockPanel.Dock="Top"
											 Margin="0 0 0 5"
											 PreviewKeyDown="UIElement_OnKeyDown">
										<TextBox.InputBindings>
											<KeyBinding Key="Enter"
														Command="{Binding EnterGlossaryCommand}"
														CommandParameter="{Binding Text, ElementName=ValueHolder}" />
										</TextBox.InputBindings>
									</TextBox>
								</DockPanel>

								<ListBox DockPanel.Dock="Top"
										 Grid.Column="0"
										 Grid.Row="1"
										 x:Name="GlossaryList"
										 Validation.ErrorTemplate="{x:Null}"
										 ItemsSource="{Binding Glossaries}"
										 SelectedItem="{Binding GlossarySetupSelectedGlossary}"
										 d:ItemsSource="{d:SampleData ItemCount=5}">
									<ListBox.ItemTemplate>
										<DataTemplate>
											<DockPanel>
												<Image Source="../../Resources/Glossary.png"
													   DockPanel.Dock="Left"
													   Height="17" />
												<TextBlock Text="{Binding GlossaryName}"
														   FontSize="10"
														   VerticalAlignment="Center"
														   DockPanel.Dock="Left" />
											</DockPanel>
										</DataTemplate>
									</ListBox.ItemTemplate>
								</ListBox>
								<Grid Grid.Column="1"
									  Grid.Row="1">
									<Grid.RowDefinitions>
										<RowDefinition />
										<RowDefinition />
									</Grid.RowDefinitions>
									<sdl:MultiSelectComboBox Grid.Row="0"
															 DockPanel.Dock="Top"
															 Margin="5 0 0 5"
															 ItemsSource="{Binding Languages}"
															 SelectedItems="{Binding SelectedItem.Languages, ElementName=GlossaryList, Mode=TwoWay}"
															 DropdownItemTemplate="{StaticResource LanguageTemplate}"
															 SelectedItemTemplate="{StaticResource LanguageTemplate}" />
									<sdl:MultiSelectComboBox Grid.Row="1"
															 DockPanel.Dock="Bottom"
															 Margin="5 5 0 0"
															 ItemsSource="{Binding Tags}"
															 SelectedItems="{Binding SelectedItem.Tags, ElementName=GlossaryList}"
															 sdl:SelectedItemsChangedBehaviour.SelectedItemsChanged="{Binding SelectedItemsChangedCommand}"
															 DropdownItemTemplate="{StaticResource TagTemplate}"
															 SelectedItemTemplate="{StaticResource TagTemplate}" />
								</Grid>
							</Grid>
						</TabItem>

						<TabItem Header="Tags">
							<Grid>
								<Grid.RowDefinitions>
									<RowDefinition Height="Auto" />
									<RowDefinition Height="*" />
								</Grid.RowDefinitions>
								<Grid.ColumnDefinitions>
									<ColumnDefinition />
									<ColumnDefinition />
								</Grid.ColumnDefinitions>

								<DockPanel LastChildFill="False"
										   Grid.Row="0"
										   Grid.Column="0"
										   Grid.ColumnSpan="2">
									<TextBlock Text="Type in a new tag then press enter:"
											   Margin="0 5 0 1"
											   DockPanel.Dock="Top" />
									<TextBox DockPanel.Dock="Top"
											 Margin="0 0 0 5"
											 PreviewKeyDown="UIElement_OnKeyDown">
										<TextBox.InputBindings>
											<KeyBinding Key="Enter"
														Command="{Binding EnterTagCommand}"
														CommandParameter="{Binding Text, ElementName=ValueHolder}" />
										</TextBox.InputBindings>
									</TextBox>
								</DockPanel>

								<ListBox DockPanel.Dock="Top"
										 Grid.Row="1"
										 x:Name="TagsList"
										 Grid.Column="0"
										 ItemsSource="{Binding Tags}"
										 SelectedItem="{Binding SelectedTag}"
										 d:ItemsSource="{d:SampleData ItemCount=5}">
									<ListBox.ItemTemplate>
										<DataTemplate>
											<DockPanel>
												<Button Command="{Binding DataContext.DeleteTagCommand, RelativeSource={RelativeSource AncestorType=ListBox}}"
														CommandParameter="{Binding TagName}"
														VerticalAlignment="Center"
														DockPanel.Dock="Left"
														Content="&#xE106;">
													<Button.Template>
														<ControlTemplate TargetType="Button">
															<TextBlock FontFamily="Segoe MDL2 Assets"
																	   Text="{TemplateBinding Content}"
																	   Foreground="Red"
																	   HorizontalAlignment="Right"
																	   FontSize="7" />
														</ControlTemplate>
													</Button.Template>
												</Button>
												<Image Source="../../Resources/Tag.png"
													   DockPanel.Dock="Left"
													   Height="17" />
												<TextBlock Text="{Binding TagName}"
														   FontSize="10"
														   VerticalAlignment="Center"
														   DockPanel.Dock="Right" />
											</DockPanel>
										</DataTemplate>
									</ListBox.ItemTemplate>
								</ListBox>


								<sdl:MultiSelectComboBox Grid.Column="1"
														 Grid.Row="1"
														 Margin="5 0 0 5"
														 ItemsSource="{Binding Glossaries}"
														 DropdownItemTemplate="{StaticResource GlossaryTemplate}"
														 SelectedItems="{Binding GlossariesTaggedWithSelected}"
														 SelectedItemTemplate="{StaticResource GlossaryTemplate}" />
							</Grid>
						</TabItem>
					</TabControl>
				</TabItem>
			</TabControl>

			<DockPanel Grid.Row="2"
					   Margin="0 10 0 0"
					   LastChildFill="False">
				<Button Content="Cancel"
						Style="{StaticResource Sdl.Button.SecondaryStyle}"
						Cursor="Hand"
						Width="120"
						IsCancel="True"
						Height="30"
						DockPanel.Dock="Right"
						Margin="0 0 10 10" />

				<Button Content="Ok"
						Style="{StaticResource Sdl.Button.PrimaryStyle}"
						Cursor="Hand"
						Width="120"
						Command="{Binding SaveCommand}"
						Click="ButtonBase_OnClick"
						Height="30"
						DockPanel.Dock="Right"
						Margin="0 0 10 10" />
			</DockPanel>
		</Grid>
	</Border>
</Window>